define("static/scripts/index/resource/resource_list",["sea-modules/bootstrap/bootstrap","sea-modules/jquery/cookie/jquery.cookie","static/scripts/index/message","static/scripts/index/resource/resource_form","static/scripts/index/datatable","sea-modules/jquery/dialog/jquery.dialog"],function(e,t,o){o.exports=function(t){e("sea-modules/bootstrap/bootstrap"),e("sea-modules/jquery/cookie/jquery.cookie");var o=$.cookie("bizData"),r=e("static/scripts/index/message"),s=e("static/scripts/index/resource/resource_form"),c=e("static/scripts/index/datatable"),n=[{data:"id"},{data:"resourceName",title:"资源名称"},{data:"resourceUrl",title:"资源代码"},{data:"resourceIcon",title:"资源样式"}],a=[{bVisible:!1,aTargets:[0]}];c.initTable({columns:n,tableContentId:"menu_table_content",tableId:(new Date).getTime()+"_table_body",columnDefs:a,searchHandle:null,buttonHandle:null,sAjaxSource:"/system/resource/getResourcePage?menuCode="+t.id+"&token="+o});var i=c.dataTable,u=function(e,r,s){var c={resourceName:e[0]||"",resourceUrl:e[1]||"",resourceIcon:e[2]||""};s?c.resourceId=s:c.menuCode=t.id,$.ajax({type:"post",url:"/system/resource/addOrEditResource?token="+o,contentType:"application/x-www-form-urlencoded;charset=UTF-8",data:{resourceJson:JSON.stringify(c)},dataType:"json",success:function(e){r(e)},error:function(){}})},d=function(){$("#add_resource").dialog("destroy")},l={text:"取消","class":"btn btn-primary",click:function(){$("#add_resource").dialog("destroy")}},f=function(e){var t=null;("0100014"===e.rtnCode||"0100015"===e.rtnCode)&&(t=function(){window.location.href="login.html"}),r({title:"温馨提示",msg:e.msg,type:"alert",clickHandle:t})},m={add:function(t){$("#"+t).off("click"),$("#"+t).on("click",function(){i&&$.get("../tmpl/resource/resource_form.html",function(t){e("sea-modules/jquery/dialog/jquery.dialog"),$("#add_resource").dialog({title:"新增资源",tmpl:t,onClose:d,render:function(){},buttons:[{text:"新增","class":"btn btn-primary",click:function(){s.validate(function(e){u(e,function(e){"0000000"===e.rtnCode?(i.fnDraw(),$("#add_resource").dialog("destroy")):($("#add_resource").dialog("destroy"),f(e))})})}},l]})})})},update:function(t){$("#"+t).off("click"),$("#"+t).on("click",function(){if(i){var t=c.selectedRecord();if(0!==t.length){var r=t[0];$.get("/system/resource/getResourcesDetail?resourceId="+r.resourceId+"&token="+o,function(t){"0000000"===t.rtnCode&&$.get("../tmpl/resource/resource_form.html",function(o){e("sea-modules/jquery/dialog/jquery.dialog"),$("#add_resource").dialog({title:"修改资源",tmpl:o,onClose:d,render:function(){$("#resource_name").val(t.bizData.resourceName),$("#resource_url").val(t.bizData.resourceUrl),$("#resource_icon").val(t.bizData.resourceIcon)},buttons:[{text:"修改","class":"btn btn-primary",click:function(){s.validate(function(e){u(e,function(e){"0000000"===e.rtnCode?(i.fnDraw(),$("#add_resource").dialog("destroy")):($("#add_resource").dialog("destroy"),f(e))},r.resourceId)})}},l]})})})}}})},"delete":function(e){$("#"+e).off("click"),$("#"+e).on("click",function(){if(i){var e=c.selectedRecord();if(0!==e.length){var t=e[0],s="确认删除资源"+t.resourceName;r({title:"温馨提示",msg:s,type:"alert",clickHandle:function(){$.ajax({type:"post",url:"/system/resource/delResources?resourceId="+t.resourceId+"&token="+o,dataType:"json",success:function(e){"0000000"===e.rtnCode?i.fnDraw():f(e)}})}})}}})}};e.async(["static/scripts/index/renderResource"],function(e){e(m,o)})}});