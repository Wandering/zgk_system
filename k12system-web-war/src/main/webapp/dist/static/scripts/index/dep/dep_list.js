define("static/scripts/index/dep/dep_list",["sea-modules/bootstrap/bootstrap","sea-modules/jquery/cookie/jquery.cookie","static/scripts/index/message","static/scripts/index/datatable","sea-modules/jquery/dialog/jquery.dialog","static/scripts/index/dep/dep_form"],function(e,t,a){a.exports=function(t,a){e("sea-modules/bootstrap/bootstrap"),e("sea-modules/jquery/cookie/jquery.cookie");var n=$.cookie("bizData"),d=e("static/scripts/index/message"),i=e("static/scripts/index/datatable"),o=[{data:"id"},{data:"departmentName",title:"部门名称"},{data:"departmentPhone",title:"部门电话"},{data:"departmentFax",title:"部门传真"},{data:"departmentPrincipal",title:"部门负责人"}],r=[{bVisible:!1,aTargets:[0]}];i.initTable({columns:o,tableContentId:"menu_table_content",tableId:(new Date).getTime()+"_table_body",columnDefs:r,sAjaxSource:"/system/department/queryDepartment?parentCode="+t+"&token="+n});var l=i.dataTable,c=function(e,a,d){var i={departmentName:e[0]||"",departmentPhone:e[1]||"",departmentFax:e[2]||"",departmentPrincipal:e[3]||""};d?i.id=d:i.parentCode=t,$.ajax({type:"post",url:"/system/department/addOrEditDepartment?token="+n,contentType:"application/x-www-form-urlencoded;charset=UTF-8",data:{departmentJson:JSON.stringify(i)},dataType:"json",success:function(e){a(e)},beforeSend:function(){},error:function(){}})},s={add:function(t){$("#"+t).off("click"),$("#"+t).on("click",function(){l&&$.get("../tmpl/dep/dep_form.html",function(t){e("sea-modules/jquery/dialog/jquery.dialog"),$("#add_dep").dialog({title:"新增部门",tmpl:t,onClose:function(){$("#add_dep").dialog("destroy")},render:function(){},buttons:[{text:"新增","class":"btn btn-primary",click:function(){var t=e("static/scripts/index/dep/dep_form");t.validate(function(e){c(e,function(t){if("0000000"===t.rtnCode){l.fnDraw();var n={id:t.bizData.departmentCode,name:e[0]};a({type:"add",obj:n}),$("#add_dep").dialog("destroy")}else $("#add_dep").dialog("destroy"),d({title:"温馨提示",msg:t.msg,type:"alert",clickHandle:function(){window.location.href="login.html"}})})})}},{text:"取消","class":"btn btn-primary",click:function(){$("#add_dep").dialog("destroy")}}]})})})},update:function(t){$("#"+t).off("click"),$("#"+t).on("click",function(){if(l){var t=i.fnGetSelected(l);if(0!==t.length){var o=l.fnGetData(t[0]);$.get("/system/department/getDepartment?id="+o.id+"&token="+n,function(t){"0000000"===t.rtnCode&&$.get("../tmpl/dep/dep_form.html",function(n){e("sea-modules/jquery/dialog/jquery.dialog"),$("#add_dep").dialog({title:"修改部门",tmpl:n,onClose:function(){$("#add_dep").dialog("destroy")},render:function(){$("#dep_name").val(t.bizData.departmentName),$("#dep_telephone").val(t.bizData.departmentPhone),$("#dep_fax").val(t.bizData.departmentFax),$("#dep_leading").val(t.bizData.departmentPrincipal)},buttons:[{text:"修改","class":"btn btn-primary",click:function(){var n=e("static/scripts/index/dep/dep_form");n.validate(function(e){c(e,function(n){if("0000000"===n.rtnCode){l.fnDraw();var i={id:t.bizData.departmentCode,name:e[0]};a({type:"update",obj:i}),$("#add_dep").dialog("destroy")}else $("#add_dep").dialog("destroy"),d({title:"温馨提示",msg:n.msg,type:"alert",clickHandle:function(){window.location.href="login.html"}})},o.id)})}},{text:"取消","class":"btn btn-primary",click:function(){$("#add_dep").dialog("destroy")}}]})})})}}})},"delete":function(e){$("#"+e).off("click"),$("#"+e).on("click",function(){if(l){var e=i.fnGetSelected(l);if(0!==e.length){var t=l.fnGetData(e[0]),o="确认删除部门"+t.departmentName;d({title:"温馨提示",msg:o,type:"alert",clickHandle:function(){$.get("/system/department/delDepartment?id="+t.id+"&token="+n,function(e){"0000000"===e.rtnCode?(l.fnDraw(),a({type:"delete",id:t.departmentCode})):d({title:"错误提示",msg:e.msg,type:"alert"})})}})}}})}};e.async(["static/scripts/index/renderResource"],function(e){e(s,n)})}});