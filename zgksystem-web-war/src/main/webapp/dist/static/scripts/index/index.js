define("static/scripts/index/index",["sea-modules/bootstrap/bootstrap","sea-modules/jquery/cookie/jquery.cookie","sea-modules/jquery/md5/jQuery.md5","static/scripts/index/tools","static/scripts/index/nav"],function(a){a("sea-modules/bootstrap/bootstrap"),a("sea-modules/jquery/cookie/jquery.cookie"),a("sea-modules/jquery/md5/jQuery.md5");var o=a("static/scripts/index/tools"),e=$.cookie("bizData");e||(window.location.href="login.html"),$(window).load(function(){var n=a("static/scripts/index/nav"),t=JSON.parse($.cookie("userInfo"));$("#login_real_name").html(t.userName),n.init("navigation","menu"),n.resize(),$(window).resize(function(){n.resize()}),$(".quick-actions .dropdown").on("show.bs.dropdown",function(){$(this).find(".dropdown-menu").addClass("animated fadeInDown"),$(this).find("#user-inbox").addClass("animated bounceIn")}),$(".mask").on("click",function(a){a.stopPropagation()}),$("#color-schemes li a").click(function(){var a=$(this).attr("class"),o=$("body").attr("class").split(" ").pop();$("body").removeClass(o).addClass(a)}),$(".sidebar-collapse a").on("click",function(){$("#sidebar, #navbar").toggleClass("collapsed"),$("#navigation").find(".dropdown.open").removeClass("open"),$("#navigation").find(".dropdown-menu.animated").removeClass("animated"),$("#sidebar > li.collapsed").removeClass("collapsed"),$("#sidebar").hasClass("collapsed")?$(window).width()<1024?$("#content").animate({left:"0px"},150):$("#content").animate({paddingLeft:"35px"},150):$(window).width()<1024?$("#content").animate({left:"210px"},150):$("#content").animate({paddingLeft:"265px"},150)}),$("#logout").on("click",function(){$.cookie("bizData","",{path:"/"}),$.cookie("userInfo","",{path:"/;domain=dataSys.com"}),window.location.href="login.html"});var s=function(a,o,n){$.ajax({type:"post",url:"/system/userInfo/"+o+"?token="+e,contentType:"application/x-www-form-urlencoded;charset=UTF-8",data:{userPojoJson:JSON.stringify(a)},dataType:"json",success:function(a){n(a)}})},i={accountId:t.accountId,userInfoId:t.userInfoId};$("#change_pwd").on("click",function(){a.async(["sea-modules/jquery/dialog/jquery.dialog"],function(){$("#change_pwd_form").dialog({title:"账户设置",tmpl:$("#tmpl_2").html(),render:function(){$("#change_basic_info").show(),$(".login-user-name").html(t.loginNumber),$(".user-name").html(t.userName),$(".user-phone").html(t.phone),$(".user-eamil").html(t.email),$(".controls a").on("click",function(){var a=$(this),e=$(this).parent().find("span"),n=$(this).parent().find("input"),t=a.attr("data-class");if(a.hasClass("change"))if(a.html("保存"),a.removeClass("change"),a.addClass("save"),"change_pwd"===t){var r=$("#change_basic_info"),d=$("#change_basic_pwd"),c=$(".fa-arrow-left");r.hide(),d.show(),c.show(),c.off("click"),c.on("click",function(){a.html("修改密码"),a.removeClass("save"),a.addClass("change"),r.show(),d.hide(),$(this).hide()}),$("#old_password").blur(function(){var a=$(this).val();a=$.md5(a),i.password=a;var e=this;s(i,"checkOldPassword",function(a){var n=$(e).parent().parent();"0100009"===a.rtnCode?(o.tip(n,a.msg),$(e).focus()):$(e).attr("data-flag","1")})})}else{var l=e.html();e.hide(),n.show(),n.val(l)}else if($(this).hasClass("save"))if("change_pwd"===t){var p=$("#old_password");if("1"!==p.attr("data-flag")){var u=p.parent().parent();return void o.tip(u,"旧密码错误")}var f=$("#new_password").val();if(!f){var u=$("#new_password").parent().parent();return void o.tip(u,"新密码不能为空")}var m=$("#confirm_new_password").val();if(m!==f){var h=$("#confirm_new_password").parent().parent();return void o.tip(h,"确认密码和新密码不一致")}f=$.md5(f),i.password=f,s(i,"updateUserInfo",function(a){"0000000"===a.rtnCode&&(window.location.href="login.html")})}else{var w=n.attr("id"),l=n.val(),v=a.attr("data-method");if(!o[v](l))return void o.tip(n.parent().parent(),"格式错误");i[w]=l,s(i,"updateUserInfo",function(o){if("0000000"===o.rtnCode){n.hide(),e.html(l),e.show(),a.removeClass("save"),a.addClass("change"),a.html(a.attr("data-title")),console.log($.cookie("userInfo"));var t=JSON.parse($.cookie("userInfo"));t[w]=l,$.cookie("userInfo",JSON.stringify(t),{expires:7})}})}})},onClose:function(){$("#change_pwd_form").dialog("destroy")},buttons:[{text:"关闭","class":"btn btn-primary",click:function(){$("#change_pwd_form").dialog("destroy")}}]})})})})});