define("static/scripts/index/index",["sea-modules/bootstrap/bootstrap","sea-modules/jquery/cookie/jquery.cookie","sea-modules/jquery/md5/jQuery.md5","static/scripts/index/tools","static/scripts/index/nav"],function(a){a("sea-modules/bootstrap/bootstrap"),a("sea-modules/jquery/cookie/jquery.cookie"),a("sea-modules/jquery/md5/jQuery.md5");var e=a("static/scripts/index/tools"),o=$.cookie("bizData");o||(window.location.href="login.html"),$(window).load(function(){var n=a("static/scripts/index/nav"),t=JSON.parse($.cookie("userInfo"));$("#login_real_name").html(t.userName),n.init("navigation","menu"),n.resize(),$(window).resize(function(){n.resize()}),$(".quick-actions .dropdown").on("show.bs.dropdown",function(){$(this).find(".dropdown-menu").addClass("animated fadeInDown"),$(this).find("#user-inbox").addClass("animated bounceIn")}),$(".mask").on("click",function(a){a.stopPropagation()}),$("#color-schemes li a").click(function(){var a=$(this).attr("class"),e=$("body").attr("class").split(" ").pop();$("body").removeClass(e).addClass(a)}),$(".sidebar-collapse a").on("click",function(){$("#sidebar, #navbar").toggleClass("collapsed"),$("#navigation").find(".dropdown.open").removeClass("open"),$("#navigation").find(".dropdown-menu.animated").removeClass("animated"),$("#sidebar > li.collapsed").removeClass("collapsed"),$("#sidebar").hasClass("collapsed")?$(window).width()<1024?$("#content").animate({left:"0px"},150):$("#content").animate({paddingLeft:"35px"},150):$(window).width()<1024?$("#content").animate({left:"210px"},150):$("#content").animate({paddingLeft:"265px"},150)}),$("#logout").on("click",function(){$.cookie("bizData","",{path:"/"}),$.cookie("userInfo","",{path:"/"}),window.location.href="login.html"});var s=function(a,e,n){$.ajax({type:"post",url:"/system/userInfo/"+e+"?token="+o,contentType:"application/x-www-form-urlencoded;charset=UTF-8",data:{userPojoJson:JSON.stringify(a)},dataType:"json",success:function(a){n(a)}})},i={accountId:t.accountId,userInfoId:t.userInfoId};$("#change_pwd").on("click",function(){a.async(["sea-modules/jquery/dialog/jquery.dialog"],function(){$("#change_pwd_form").dialog({title:"账户设置",tmpl:$("#tmpl_2").html(),render:function(){$("#change_basic_info").show(),$(".login-user-name").html(t.loginNumber),$(".user-name").html(t.userName),$(".user-phone").html(t.phone),$(".user-eamil").html(t.email),$(".controls a").on("click",function(){var a=$(this),o=$(this).parent().find("span"),n=$(this).parent().find("input"),r=a.attr("data-class");if(a.hasClass("change"))if(a.html("保存"),a.removeClass("change"),a.addClass("save"),"change_pwd"===r){var d=$("#change_basic_info"),c=$("#change_basic_pwd"),l=$(".fa-arrow-left");d.hide(),c.show(),l.show(),l.off("click"),l.on("click",function(){a.html("修改密码"),a.removeClass("save"),a.addClass("change"),d.show(),c.hide(),$(this).hide()}),$("#old_password").blur(function(){var a=$(this).val();a=$.md5(a),i.password=a;var o=this;s(i,"checkOldPassword",function(a){var n=$(o).parent().parent();"0100009"===a.rtnCode?(e.tip(n,a.msg),$(o).focus()):$(o).attr("data-flag","1")})})}else{var p=o.html();o.hide(),n.show(),n.val(p)}else if($(this).hasClass("save"))if("change_pwd"===r){var u=$("#old_password");if("1"!==u.attr("data-flag")){var f=u.parent().parent();return void e.tip(f,"旧密码错误")}var m=$("#new_password").val();if(!m){var f=$("#new_password").parent().parent();return void e.tip(f,"新密码不能为空")}var h=$("#confirm_new_password").val();if(h!==m){var w=$("#confirm_new_password").parent().parent();return void e.tip(w,"确认密码和新密码不一致")}m=$.md5(m),i.password=m,s(i,"updateUserInfo",function(a){"0000000"===a.rtnCode&&(window.location.href="login.html")})}else{var v=n.attr("id"),p=n.val(),g=a.attr("data-method");if(!e[g](p))return void e.tip(n.parent().parent(),"格式错误");i[v]=p,i.token=JSON.parse($.cookie("userInfo")).token,s(i,"updateUserInfo",function(e){if("0000000"===e.rtnCode){n.hide(),o.html(p),o.show(),a.removeClass("save"),a.addClass("change"),a.html(a.attr("data-title"));var s=JSON.parse($.cookie("userInfo"));s[v]=p,$.cookie("userInfo",JSON.stringify(e.bizData),{expires:7,path:"/"}),t=JSON.parse(e.bizData)}})}})},onClose:function(){$("#change_pwd_form").dialog("destroy")},buttons:[{text:"关闭","class":"btn btn-primary",click:function(){$("#change_pwd_form").dialog("destroy")}}]})})})})});