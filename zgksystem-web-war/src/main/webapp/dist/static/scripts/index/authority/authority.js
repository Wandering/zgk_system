define("static/scripts/index/authority/authority",["sea-modules/bootstrap/bootstrap","sea-modules/jquery/cookie/jquery.cookie","static/scripts/index/message","static/scripts/index/datatable","sea-modules/jquery/dialog/jquery.dialog"],function(e,o,t){t.exports=function(){e("sea-modules/bootstrap/bootstrap"),e("sea-modules/jquery/cookie/jquery.cookie");var o=$.cookie("bizData"),t=e("static/scripts/index/message"),i=e("static/scripts/index/datatable"),a=[{data:"postCode"},{data:"postName",title:"岗位名称"}],r=[{bVisible:!1,aTargets:[0]}],s=function(e){t({title:"温馨提示",msg:e,type:"alert"})};i.initTable({columns:a,tableContentId:"table_content",tableId:"table_body_"+ +new Date,columnDefs:r,sAjaxSource:"/system/post/getManagerPost?token="+o});var d={distributionRight:function(a){$("#"+a).off("click"),$("#"+a).on("click",function(){var a=i.selectedRecord();if(1!=a.length)return void s("每次只能选择一项分配权限");var r=a[0].postCode;e("sea-modules/jquery/dialog/jquery.dialog"),$("#role_radio").dialog({title:"分配权限",tmpl:'<div id="role_radio"></div>',onClose:function(){$("#role_radio").dialog("destroy")},render:function(){$.get("/system/role/getPostRoles?token="+o+"&postCode="+r,function(e){var t;"0000000"===e.rtnCode&&(t=e.bizData.roleCode),$.get("/system/role/queryComboxRoles?token="+o,function(e){if("0000000"===e.rtnCode){var o=e.bizData;if(!o)return $("#role_radio").dialog("destroy"),void s("请添加相关角色信息");var i=[];for(var a in o){i.push('<div class="radio"><label>');var r="";a==t&&(r="checked"),i.push('<input type="radio" name="roleRadios" value="'+a+'" '+r+">"),i.push(o[a]),i.push("</label></div>")}i.push('<div class="radio" id="error_tip" style="color: #f00;"></div>'),$("#role_radio").html(i.join(""))}else $("#role_radio").dialog("destroy"),"0100010"===e.rtnCode&&s("请添加相关角色信息")})})},buttons:[{text:"保存","class":"btn btn-primary",click:function(){var e=$("input[name='roleRadios']:checked").val();if(!e)return void $("#error_tip").html("请选择角色权限");var i={postCode:r,roleCode:e};$.ajax({type:"post",url:"/system/role/distributionRoles?token="+o,contentType:"application/x-www-form-urlencoded;charset=utf-8",data:{rolePostJson:JSON.stringify(i)},dataType:"json",success:function(e){"0000000"===e.rtnCode?$("#role_radio").dialog("destroy"):($("#role_radio").dialog("destroy"),t({title:"温馨提示",msg:e.msg,type:"alert",clickHandle:function(){window.location.href="login.html"}}))}})}},{text:"取消","class":"btn btn-primary",click:function(){$("#role_radio").dialog("destroy")}}]})})}};e.async(["static/scripts/index/renderResource"],function(e){e(d,o)})}});