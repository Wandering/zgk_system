define("static/scripts/index/menuManager/menu_list",["sea-modules/bootstrap/bootstrap","sea-modules/jquery/cookie/jquery.cookie","sea-modules/jquery/dialog/jquery.dialog","static/scripts/index/message","static/scripts/index/datatable","static/scripts/index/menuManager/menu_form"],function(e,t,n){n.exports=function(t,n){e("sea-modules/bootstrap/bootstrap"),e("sea-modules/jquery/cookie/jquery.cookie"),e("sea-modules/jquery/dialog/jquery.dialog");var a=$.cookie("bizData"),o=e("static/scripts/index/message"),i=e("static/scripts/index/datatable"),d=[{data:"menuName",title:"菜单名称"},{data:"menuIcon",title:"菜单代码"},{data:"seqSort",title:"菜单排序"}];i.initTable({columns:d,tableContentId:"menu_table_content",tableId:"menu_table_body",sAjaxSource:"/system/menu/queryPage?token="+a+"&menuCode="+t});var u=i.dataTable,s=function(e){var t=null;("0100014"===e.rtnCode||"0100015"===e.rtnCode)&&(t=function(){window.location.href="login.html"}),o({title:"温馨提示",msg:e.msg,type:"alert",clickHandle:t})},c=function(e,t){$.ajax({type:"post",url:"/system/menu/addOrEditMenu?token="+a,contentType:"application/x-www-form-urlencoded;charset=utf-8",data:{menuJson:JSON.stringify(e)},dataType:"json",success:function(e){"0000000"===e.rtnCode?(window.location.reload(),u.fnDraw(),t(e),$("#add_menu").dialog("destroy")):"0100014"===e.rtnCode&&($("#add_menu").dialog("destroy"),s(e))}})},r={add:function(a){$("#"+a).off("click"),$("#"+a).on("click",function(){u&&$.get("../tmpl/menu/menu_dialog.tmpl",function(a){$("#add_menu").dialog({title:"新增菜单",tmpl:a,onClose:function(){$("#add_menu").dialog("destroy")},render:function(){},buttons:[{text:"新增","class":"btn btn-primary",click:function(){var a=e("static/scripts/index/menuManager/menu_form");a.validate(function(e,a,o,i){var d={menuName:e,menuIcon:a,description:o,parentCode:t,seqSort:i};c(d,function(t){var a={id:t.bizData.menuCode,name:e};n({type:"add",obj:a})})})}},{text:"取消","class":"btn btn-primary",click:function(){$("#add_menu").dialog("destroy")}}]})})})},update:function(o){$("#"+o).off("click"),$("#"+o).on("click",function(){if(u){var o=i.selectedRecord();if(1!=o.length)return void s({msg:"请选择一条记录修改！"});var d=o[0];$.get("/system/menu/getMenuDetail?menuId="+d.id+"&token="+a,function(a){if("0000000"===a.rtnCode){var o=a.bizData;$.get("../tmpl/menu/menu_dialog.tmpl",function(a){e("sea-modules/jquery/dialog/jquery.dialog"),$("#add_menu").dialog({title:"修改菜单",tmpl:a,onClose:function(){$("#add_menu").dialog("destroy")},render:function(){$("#menu_name").val(o.menuName),$("#menu_icon").val(o.menuIcon),$("#menu_describe").val(o.description),$("#menu_sort").val(o.seqSort)},buttons:[{text:"修改","class":"btn btn-primary",click:function(){var a=e("static/scripts/index/menuManager/menu_form");a.validate(function(e,a,i,d){var u={menuName:e,menuIcon:a,description:i,parentCode:t,menuId:o.menuId,seqSort:d};c(u,function(){var t={id:o.menuId,name:e};n({type:"update",obj:t})})})}},{text:"取消","class":"btn btn-primary",click:function(){$("#add_menu").dialog("destroy")}}]})})}})}})},"delete":function(e){$("#"+e).off("click"),$("#"+e).on("click",function(){if(u){var e=i.selectedRecord();if(e.length<=0)return void s({msg:"请选择至少一条记录删除！"});var t=e[0],d="确认删除这条数据"+t.menuName;o({title:"温馨提示",msg:d,type:"alert",clickHandle:function(){$.ajax({type:"post",url:"/system/menu/delMenu?menuId="+t.id+"&token="+a,dataType:"json",success:function(e){"0000000"===e.rtnCode?(u.fnDraw(),n({type:"delete",id:t.menuCode})):s(e)}})}})}})}};e.async(["static/scripts/index/renderResource"],function(e){e(r,a)})}});