define("static/scripts/index/nav",["sea-modules/jquery/cookie/jquery.cookie","sea-modules/bootstrap/bootstrap","static/scripts/index/message","static/scripts/index/menuManager/menu_manager"],function(e,t,a){function n(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(t);return null!=a?unescape(a[2]):null}e("sea-modules/jquery/cookie/jquery.cookie");var s=$.cookie("bizData");e("sea-modules/bootstrap/bootstrap");var i=e("static/scripts/index/message"),r=function(){$(window).width()<1024?($("#sidebar, #navbar").addClass("collapsed"),$("#navigation").find(".dropdown.open").removeClass("open"),$("#navigation").find(".dropdown-menu.animated").removeClass("animated"),$("#sidebar").hasClass("collapsed")?$("#content").animate({left:"0px",paddingLeft:"55px"},150):$("#content").animate({paddingLeft:"55px"},150)):($("#sidebar, #navbar").removeClass("collapsed"),$("#sidebar").hasClass("collapsed")?$("#content").animate({left:"210px",paddingLeft:"265px"},150):$("#content").animate({paddingLeft:"265px"},150))},o=function(){$(window).width()<768?(1===$(".collapsed-content .search").length&&$("#main-search").appendTo(".collapsed-content .search"),0===$(".collapsed-content li.user").length&&$(".collapsed-content li.search").after($("#current-user"))):($("#current-user").show(),2===$(".collapsed-content .search").length&&$(".nav.refresh").after($("#main-search")),1===$(".collapsed-content li.user").length&&$(".quick-actions >li:last-child").before($("#current-user")))},c={navStr:[],menuCode:{authorityManager:function(){$("#page_0").html(""),c.changeSection("tmpl_1");try{e.async(["static/scripts/index/authority/authority"],function(e){e()})}catch(t){}},resourceManager:function(){$(".mask").fadeIn(),setTimeout(function(){$(".mask").fadeOut()},5e3),$("#page_0").html("");var t=n("systemCode");e.async(["static/scripts/index/common/initTreeGrid","static/scripts/index/resource/resource_list"],function(e,a){var n={succ:c.getTreeDataSuccess,err:function(e){c.getTreeDataError(e,"请联系系统管理员添加菜单信息")},getTreeDataURL:"/system/menu/getMenuTree?token="+s+"&systemCode="+t,listGridModule:a};e(n)})},roleManager:function(){$("#page_0").html(""),c.changeSection("tmpl_1");try{e.async(["static/scripts/index/role/role"],function(e){e()})}catch(t){}},departmentManager:function(){$("#page_0").html(""),e.async(["static/scripts/index/dep/dep"],function(e){c.treeMenuEntry(e,"请联系管理员添加代理公司")})},menuManager:function(){$("#page_0").html("");var t=e("static/scripts/index/menuManager/menu_manager");c.treeMenuEntry(t)},platformManager:function(){$("#page_0").html(""),c.changeSection("tmpl_1");try{e.async(["static/scripts/index/platform/platform"],function(e){e()})}catch(t){}},productManager:function(){$("#page_0").html(""),c.changeSection("tmpl_1");try{e.async(["static/scripts/index/product/product"],function(e){e()})}catch(t){}},companyManager:function(){$("#page_0").html(""),e.async(["static/scripts/index/company/company"],function(e){c.treeMenuEntry(e,"请联系产品管理员添加产品")})},positionManager:function(){$(".mask").fadeIn(),setTimeout(function(){$(".mask").fadeOut()},5e3),$("#page_0").html(""),e.async(["static/scripts/index/common/initTreeGrid","static/scripts/index/position/position_list"],function(e,t){var a={succ:c.getTreeDataSuccess,err:function(e){c.getTreeDataError(e,"请联系代理公司管理员添加部门信息")},getTreeDataURL:"/system/department/queryTreeDepartmentAll?token="+s,listGridModule:t};e(a)})},employeeManager:function(){$(".mask").fadeIn(),setTimeout(function(){$(".mask").fadeOut()},5e3),$("#page_0").html(""),e.async(["static/scripts/index/common/initTreeGrid","static/scripts/index/employee/employee_list"],function(e,t){var a={succ:c.getTreeDataSuccess,err:function(e){c.getTreeDataError(e,"请联系部门管理员添加岗位信息")},getTreeDataURL:"/system/department/queryTreeDepartmentAll?token="+s+"&navType=2",listGridModule:t};e(a)})}},getTreeDataSuccess:function(){$(".mask").fadeOut(),c.changeSection("tmpl_0")},getTreeDataError:function(e,t){$(".mask").fadeOut();var a="",n=null;a="0100010"===e.rtnCode?t:e.msg||"抱歉，发生错误信息","0100014"===e.rtnCode&&(n=function(){window.location.href="login.html"}),i({title:"温馨提示",msg:a,type:"alert",clickHandle:n})},treeMenuEntry:function(e,t,a,n){try{$(".mask").fadeIn(),setTimeout(function(){$(".mask").fadeOut()},5e3);var s={succ:this.getTreeDataSuccess,err:function(e){c.getTreeDataError(e,t)},getTreeDataURL:a||"",listGridModule:n||null};e(s)}catch(i){}},changeSection:function(e){$("#page_0").html($("#"+e).html())},getNavData:function(e,t){var a=this,r=n("systemCode");$.get("/system/menu/getMenuTree?token="+s+"&systemCode="+r,function(n){if("0000000"===n.rtnCode){var s=n.bizData.treeBeanList,r=a.initNav(s,t);$("#"+e).html(r),a.initFisrt(),a.addEvent()}else{var o=null;("0100014"===n.rtnCode||"0100015"===n.rtnCode)&&(o=function(){window.location.href="login.html"}),i({title:"温馨提示",msg:n.msg,type:"alert",clickHandle:o})}})},initNav:function(e,t,a){this.navStr.push('<ul class="'+t+'">');for(var n=["fa-tachometer","fa-list","fa-pencil","fa-th-large","fa-desktop","fa-play-circle","fa-bar-chart-o","fa-tint","fa-th","fa-star"],s=0,i=e.length;i>s;s++){var r=e[s].children||[];if(r.length>0)this.navStr.push('<li data-code="'+e[s].leafIcon+'" class="dropdown">'),this.navStr.push('<a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-tachometer"></i>'+e[s].name+'<b class="fa fa-plus dropdown-plus"></b></a>'),this.initNav(r,"dropdown-menu",!0),this.navStr.push("</li>");else{var o="";"menu"===t&&(o='<i class="fa '+n[s]+'"></i>');var c=a?'<i class="fa fa-caret-right"></i>':"";this.navStr.push('<li data-id="'+e[s].id+'" data-code="'+e[s].leafIcon+'"><a href="javascript:void(0)">'+o+c+e[s].name+"</a></li>")}}return this.navStr.push("</ul>"),this.navStr.join("")},initFisrt:function(){var e=$("#navigation .menu > li").first();return e.addClass("active"),e.hasClass("dropdown")?(e.addClass("open"),e.find("li").first().addClass("resource active"),void this.sendredirectByCode(e.find("li").first())):(e.addClass("resource"),void this.sendredirectByCode(e))},sendredirectByCode:function(e){var t=e.attr("data-code");"function"==typeof this.menuCode[t]&&this.menuCode[t]()},addEvent:function(){var e=this;$("#navigation .menu > li").on("click",function(t){if($(this).siblings().removeClass("open"),$("#navigation .menu li").removeClass("resource"),$("#navigation .dropdown-menu > li").removeClass("resource active"),$(this).hasClass("dropdown"))if($(this).hasClass("open"))$(this).removeClass("open"),$(this).find("li").removeClass("active"),$(this).find("li").removeClass("resource");else{$(this).addClass("open");var a=$(this).find("li").first();a.addClass("resource active"),e.sendredirectByCode(a)}else $(this).addClass("resource"),e.sendredirectByCode($(this));$(this).hasClass("active")||$(this).addClass("active").siblings().removeClass("resource active"),t.stopPropagation()}),$("#navigation .dropdown-menu > li").on("click",function(t){$(this).hasClass("resource active")||($(this).addClass("resource active").siblings().removeClass("resource active"),e.sendredirectByCode($(this))),t.stopPropagation()}),$("#navigation .menu > li").hover(function(){$(this).addClass("hovered"),$("#sidebar").addClass("open")},function(){$(this).removeClass("hovered"),$("#sidebar").removeClass("open")})},resize:function(){r(),o()}};a.exports={resize:function(){c.resize()},init:function(e,t){c.getNavData(e,t)}}});