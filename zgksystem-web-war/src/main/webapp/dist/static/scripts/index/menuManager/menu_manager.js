define("static/scripts/index/menuManager/menu_manager",["sea-modules/jquery/cookie/jquery.cookie"],function(e,n,t){function i(e){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),t=window.location.search.substr(1).match(n);return null!=t?unescape(t[2]):null}t.exports=function(n){e("sea-modules/jquery/cookie/jquery.cookie");var t=$.cookie("bizData"),r=null,o=function(n){e.async(["static/scripts/index/menuManager/menu_list"],function(e){e(n,function(e){if("add"===e.type){var t=r.treeObj.getNodeByParam("id",n,null);r.treeObj.addNodes(t,e.obj)}else if("update"===e.type){var i=r.treeObj.getNodeByParam("id",e.obj.id,null);i.name=e.obj.name,r.treeObj.updateNode(i)}else if("delete"===e.type){var o=r.treeObj.getNodeByParam("id",e.id,null);r.treeObj.removeNode(o)}})})},a=i("systemCode");$.get("/system/menu/getMenuTree?token="+t+"&systemCode="+a,function(t){if("0000000"===t.rtnCode){var i=t.bizData.treeBeanList;i.sort(function(e,n){return e.id-n.id});var r=[{name:"根菜单",id:"-1",children:[]}];if(r[0].children.push.apply(r[0].children,i),r.length<=0)return void n.err(t);n.succ(),e.async(["static/scripts/index/tree"],function(e){e.init({id:"tree_menu",url:"",beforeClick:function(e,n){o(n.id)},onAsyncSuccess:function(){},nodes:r});var n=r[0],t=e.treeObj.getNodeByParam("id",n.id,null);e.treeObj.selectNode(t),e.treeObj.expandNode(t,!0,!1,!0),o(n.id)})}else n.err(t)})}});